<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SketchWave – Sdílené plátno</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body class="d-flex flex-column bg-light">
  <!-- Top navbar -->
  <nav class="navbar navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">SketchWave</a>
      <div class="d-flex align-items-center">
        <span class="me-2">Uživatel</span>
        <button class="btn btn-outline-dark btn-sm">Profil</button>
      </div>
    </div>
  </nav>

  <!-- App layout -->
  <div id="app" class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <aside class="sw-sidebar bg-light border-end">
        <div class="sw-sidebar-inner d-flex flex-column py-3">
          <div class="sidebar-top w-100">
           <button class="btn btn-tool mb-2" id="showDrawMenu">Kreslení</button>
           <div class="tool-menu d-none" id="drawMenu">
             <label class="form-label">Barva</label>
             <input id="colorInput" type="color" class="form-control form-control-color mb-2" value="#22223b" title="Vyberte barvu">
             <label class="form-label">Tloušťka</label>
             <input id="widthRange" type="range" class="form-range mb-2" min="1" max="30" value="4">
             <!-- ovládací tlačítka pro undo/redo/clear/save byla přemístěna do spodní části sidebaru -->
           </div>
           <button class="btn btn-tool mb-2" id="showTextMenu">Text</button>
           <div class="tool-menu d-none" id="textMenu">
             <label class="form-label">Barva textu</label>
             <input id="textColorInput" type="color" class="form-control form-control-color mb-2" value="#22223b" title="Barva textu">
             <label class="form-label">Velikost písma (stupeň)</label>
             <input id="textWidthRange" type="range" class="form-range mb-2" min="1" max="40" value="4">
             <p class="text-muted small">Dvojklikem na plátno vložíte text. Potvrďte Enter.</p>
           </div>
           <button class="btn btn-tool mb-2" id="showShapeMenu">Tvary</button>
           <div class="tool-menu d-none" id="shapeMenu">
             <label class="form-label">Barva tvaru</label>
             <input id="shapeColorInput" type="color" class="form-control form-control-color mb-2" value="#22223b" title="Barva tvaru">
             <label class="form-label">Tloušťka čáry</label>
             <input id="shapeWidthRange" type="range" class="form-range mb-2" min="1" max="30" value="4">
             <div class="btn-group-vertical" role="group" aria-label="Tvary">
               <input type="radio" id="shape-rect" name="shapeType" value="rect" checked hidden>
               <label class="btn btn-outline-dark" for="shape-rect">Obdélník</label>
               <input type="radio" id="shape-circle" name="shapeType" value="circle" hidden>
               <label class="btn btn-outline-dark" for="shape-circle">Kruh</label>
               <input type="radio" id="shape-line" name="shapeType" value="line" hidden>
               <label class="btn btn-outline-dark" for="shape-line">Čára</label>
             </div>
             <p class="text-muted small mt-2">Tažením nakreslíte tvar.</p>
           </div>
          </div>

          <div class="sidebar-bottom w-100">
           <div class="d-flex gap-2 justify-content-center mb-2 control-row">
             <button id="undoBtn" class="btn btn-outline-secondary btn-sm" title="Zpět">
               <i class="bi bi-arrow-counterclockwise" aria-hidden="true"></i>
               <span class="visually-hidden">Zpět</span>
             </button>
             <button id="redoBtn" class="btn btn-outline-secondary btn-sm" title="Znovu">
               <i class="bi bi-arrow-clockwise" aria-hidden="true"></i>
               <span class="visually-hidden">Znovu</span>
             </button>
             <button id="clearBtn" class="btn btn-outline-secondary btn-sm" title="Vymazat">
               <i class="bi bi-trash" aria-hidden="true"></i>
               <span class="visually-hidden">Vymazat</span>
             </button>
             <button id="saveBtn" class="btn btn-outline-secondary btn-sm" title="Uložit">
               <i class="bi bi-download" aria-hidden="true"></i>
               <span class="visually-hidden">Uložit</span>
             </button>
           </div>
           <button class="btn btn-tool mb-2" id="inviteBtn">Pozvat</button>
           <button class="btn btn-tool mb-2" id="copyLinkBtn">Kopírovat odkaz</button>
          </div>
        </div>
      </aside>

      <!-- Stage / canvas -->
      <main class="col bg-light">
        <div class="canvas-wrap shadow">
          <canvas id="drawCanvas" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:1;"></canvas>
          <canvas id="overlayCanvas" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;pointer-events:none;"></canvas>
        </div>
      </main>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <script src="/js/sketchpad.js"></script>
  <script>
    const drawBtn = document.getElementById('showDrawMenu');
    const textBtn = document.getElementById('showTextMenu');
    const shapeBtn = document.getElementById('showShapeMenu');
    const drawMenu = document.getElementById('drawMenu');
    const textMenu = document.getElementById('textMenu');
    const shapeMenu = document.getElementById('shapeMenu');

    function toggleMenu(button, menu) {
      const allMenus = [drawMenu, textMenu, shapeMenu];
      const allButtons = [drawBtn, textBtn, shapeBtn];

      allMenus.forEach(m => m.classList.add('d-none'));
      allButtons.forEach(b => b.classList.remove('active'));

      menu.classList.toggle('d-none');
      button.classList.toggle('active');
    }

    drawBtn.addEventListener('click', () => toggleMenu(drawBtn, drawMenu));
    textBtn.addEventListener('click', () => toggleMenu(textBtn, textMenu));
    shapeBtn.addEventListener('click', () => toggleMenu(shapeBtn, shapeMenu));
  </script>
</body>
</html>
